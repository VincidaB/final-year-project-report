\documentclass[11pt]{article}
\usepackage[T1]{fontenc}

% Set page size and margins
% Replace `letterpaper' with`a4paper' for UK/EU standard size
\usepackage[a4paper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\pagestyle{fancy}

\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\usepackage{glossaries}
\usepackage{subfigure}

\makenoidxglossaries


\loadglsentries{lexique}


\usepackage{xcolor}

\usepackage{eso-pic}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning}
\usepackage{float}
\usepackage{textcomp}
\usepackage{soul}
\usepackage{listings}
\newcommand{\hilight}{\makebox[0pt][s]{\color{green!50}\rule[-3.6pt]{1.0\linewidth}{12pt}}}

\usepackage{tikz}

\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\lstdefinestyle{command}{
  backgroundcolor=\color{white},
  basicstyle=\ttfamily\color{black},
  keywordstyle=\color{blue},
  commentstyle=\color{mygray},
  stringstyle=\color{red},
  showstringspaces=false,
  upquote=true,
  morekeywords={sudo, ls, cd, mv, cp, rm, mkdir, chmod, chown, grep, find},
  captionpos=b,
  frame=single,
  numbers=left,
  numberstyle=\tiny\color{mygray},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  keepspaces=true,
  caption={Linux Command},
  label=command,
}
\lstdefinestyle{bashstyle}{
  backgroundcolor=\color{white},
  basicstyle=\ttfamily\color{black},
  keywordstyle=\color{blue},
  commentstyle=\color{mygray},
  stringstyle=\color{red},
  showstringspaces=false,
  upquote=true,
  morekeywords={sudo, ls, cd, mv, cp, rm, mkdir, chmod, chown, grep, find},
  captionpos=b,
  frame=single,
  numbers=left,
  numberstyle=\tiny\color{mygray},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  keepspaces=true,
  caption={Script bash},
  label=command,
}

\lstdefinestyle{cstyle}{
    language=C,
    basicstyle=\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\color{green!40!black},
    stringstyle=\color{red},
    identifierstyle=\color{black},
    captionpos=b,
    numbers=left,
    numberstyle=\tiny\color{gray},
    frame=single,
    breaklines=true,
    showstringspaces=false,
    tabsize=4,
    morekeywords={int, char, void, if, else, while, for, return, typedef, struct, include},
    columns=flexible
}

\lstdefinestyle{makefilestyle}{
    language=make,
    basicstyle=\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\color{green!40!black},
    captionpos=b,
    stringstyle=\color{red},
    identifierstyle=\color{black},
    numbers=left,
    numberstyle=\tiny\color{gray},
    frame=single,
    breaklines=true,
    showstringspaces=false,
    tabsize=4,
    morekeywords={ifeq, endif, else, ifdef, ifndef, define, endef, export, unexport, obj},
    columns=flexible
}
\lstdefinestyle{config}{
    language=make,
    basicstyle=\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\color{green!40!black},
    captionpos=b,
    stringstyle=\color{red},
    identifierstyle=\color{black},
    numbers=left,
    numberstyle=\tiny\color{gray},
    frame=single,
    breaklines=true,
    showstringspaces=false,
    tabsize=4,
    morekeywords={ifeq, endif, else, ifdef, ifndef, define, endef, export, unexport, obj},
    columns=flexible
}

\bibliographystyle{plain} % We choose the "plain" reference style

\renewcommand{\epsilon}{\varepsilon} 
\renewcommand{\phi}{\varphi} 
\title{Final year project report\vspace{10pt}\\**************************************************\\Multi agent scene exploration and mapping \\
for civil enginering progress tracking\vspace{10pt} \\**************************************************}
\author{BELPOIS Vincent \\ Under the supervision of Dr. Ivan \textsc{Mutis}}

\begin{document}

\date{2024}
\maketitle
\thispagestyle{empty}

\vspace{10mm}

    \begin{center}
    \includegraphics[width = 6cm]{Images/logo_ensma.png}
    \end{center}
    \vspace{2cm}
    \begin{center}
        \includegraphics[width = 8cm]{Images/IIT_Logo_stack_186_blk.png}
    \end{center}
    \newpage
    \thispagestyle{empty}
    \mbox{}
    
    

    
    \AddToShipoutPictureBG{%
    \put(15,7){\includegraphics[scale = 0.02]{Images/logo_ensma.png}}
    \put(480,10){\includegraphics[width = 100pt]{Images/IIT_Logo_stack_186_blk.png}}
    
    }



    \newpage
    \section*{Acknowledgments}

        Acknowledgments
        
    \newpage
    \thispagestyle{empty}
    \mbox{}
    \newpage
    \thispagestyle{empty}
    {\small \tableofcontents}

    \newpage
    \thispagestyle{empty}
    \mbox{}
    \newpage
    
    \section{Introduction}
    
        Introduction    

        $$
        \int_\alpha^\beta f(x) dx
        $$
        \cite{xu2022fast}


    \newpage
    
    \section[Setting up the physical agents]{Setting up the physical agents}
    \label{section:big title}%label to reference section

        Explain the goals of having multiple platforms : 
        - quickly metione the 3 platforms
        - explain that each platform needed differnet attention (sensors, power, design fron the ground up, ...)

        Three platforms were used in this project, a six wheeled platform, a quadcopter and a quadruped platform. Each platform was chosen for its specific characteristics and the goal was to have a multi agent system that could explore a scene and map it. The six wheeled platform was chosen for its stability and its ability to carry heavy loads. The quadcopter was chosen for its ability to fly and to have a bird's eye view of the scene. The quadruped platform was chosen for its ability to climb stairs and to have a low center of gravity.

    
        \subsection{Six wheeled platform setup}

            Explain the platform's starting point and the goal

            The six wheeled platform was chosen for its stability and its ability to carry heavy loads, the intent was to have it carying a robotic arm for other projects.

            \subsubsection{Mechanical modifications}
            As it came, the six wheeled platform only consisted of a stainless steel chassis and 6 DC motors and wheels. The platform required several mechanical modifications to accommodate the necessary components for autonomous operation. Specifically, it needed a mount for a Lidar sensor and an embedded computer on its top surface \ref{fig:lidar_mount}. Additionally, a mounting solution for the motor drivers on the inside of the chassis was essential \ref{fig:motor_driver_mount}. These modifications were designed and implemented to ensure proper integration of all components while maintaining the structural integrity of the platform \ref{fig:full_cad_model}.

            \begin{figure}[htbp]
                \centering
                LIDAR MOUNT CAD
                %\includegraphics[width=0.8\textwidth]{images/lidar_mount_cad.png}
                \caption{CAD model of the Lidar sensor and embedded computer mount}
                \label{fig:lidar_mount}
            \end{figure}
            
            \begin{figure}[htbp]
                \centering
                MOTOR DRIVER MOUNT CAD
                %\includegraphics[width=0.8\textwidth]{images/motor_driver_mount_cad.png}
                \caption{CAD model of the motor driver mounting solution}
                \label{fig:motor_driver_mount}
            \end{figure}
            
            \begin{figure}[htbp]
                \centering
                FULL PLATFORM CAD
                %\includegraphics[width=0.8\textwidth]{images/full_platform_cad.png}
                \caption{Full CAD model of the modified six-wheeled platform}
                \label{fig:full_cad_model}
            \end{figure}

            \subsubsection{Electronics architecture}
                The essential electronic components needed to get the platform running were mainly DC motor drivers to drive the motors, a Lidar sensor and an embedded computer.
                
                Difficulties were encountered when trying to use the drivers someone else tried before hand as they were underpowered : at stall, the motors required around 5 amps, as measured with a bench top power supply, and the drivers I was trying to use were only capable of delivering 2 amps per channel or a total of 4 amps when combining outputs. The drivers in question were the \color{red} INSERT REFERENCE \color{black} which were in terms replaced by the driver \color{red} INSERT REFERENCE \color{black}. A physical comparaison can be seen in \ref{fig:drivers_compraison}
                
                
                \begin{figure}
                    \centering
                    INSERT (a) (b) PICTURE OF BOTH DRIVERS
                    \label{fig:drivers_compraison}
                \end{figure}

                The three motor drivers were connected to microcontroller. The connection can be seen in \ref{fig:driver_to_pico}.
                I chose to use a Raspberry pi Pico microcontroller for it's many outputs at a total of \color{red} XX general purpose input outputs (GPIO) \color{black}. Each driver required 6 control signals or 3 per motor : Two signals are used to control the direction of the motor according to table \color{red} MAKE AND CITE TABLE DIR \color{black} while the third signal's duty cycle determine the speed.

                A radio control (RC) receiver was also connected to interupt capable GPIOs of the micrcontoller to be able to control the platform manually. Three channels of the RC receiver were used to control the speed, the direction and the mode of the platform. The mode refers to whether or not the platform is in manual control or in autonomous mode and is connected to channel 5 of the radio wich has a two way switch.

                Finally, the pico is connected to an Nvidia Jetson Orin single board computer (SBC) via USB. This connection is used both to reprogram the pico, as well as to send speed and direction commands to each motor via a serial communication. 

                Not including the power distribution and regulation system, \ref{fig:overall_electical_system} shows the electrical connections of these components on the modified six-wheeled platform.

                \begin{figure}
                    \centering
                    OVERALL ELECTRICAL SYSTEM (excluding power)
                    \label{fig:overall_electical_system}
                \end{figure}


                
                
                \begin{figure}
                    \centering
                    Driver to PICO connection diagram
                    \label{fig:driver_to_pico}
                \end{figure}

            
            
                \subsubsection{Software architecture}

            \subsubsection{ROS 2 setup}
            \subsubsection{Issues encountered}


        \subsection{Quadcopter setup}
                
                Explain the platform's starting point and the goal
                Explain the different drones that were at my disposition
                \subsubsection{Mechanical modifications}
    
                \subsubsection{Electronics architecture}
    
                \subsubsection{Software architecture and setup}
    
            
                \subsubsection{Issues encountered}
                
                \subsection{Quadruped platform setup}
        \newpage

    \section{Simulation}

    \section{Conclusion}
    %\addcontentsline{toc}{section}{Conclusion}

        Conclusion     

    \newpage
    \bibliography{refs} % Entries are in the refs.bib file
    \addcontentsline{toc}{section}{Bibliography}

    \newpage
    \addcontentsline{toc}{section}{Glossaire}
    \printnoidxglossaries %glossaire, dans le fichier lexique.tex

    \newpage
    \addcontentsline{toc}{section}{List of figures}
    \listoffigures


    \newpage
    \section*{Annexe}
    \addcontentsline{toc}{section}{Annexe}
    Uncomment input annexe when needed
    %\input{annexe}



    
\end{document}